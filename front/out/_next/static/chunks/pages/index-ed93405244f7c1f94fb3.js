_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("QeBL")}])},Lnxd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("q1tI"),i=n.n(r),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=i.a.createContext&&i.a.createContext(a),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function u(e){return e&&e.map((function(e,t){return i.a.createElement(e.tag,c({key:t},e.attr),u(e.child))}))}function l(e){return function(t){return i.a.createElement(f,c({attr:c({},e.attr)},t),u(e.child))}}function f(e){var t=function(t){var n,r=e.attr,a=e.size,o=e.title,u=s(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.a.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:n,style:c(c({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&i.a.createElement("title",null,o),e.children)};return void 0!==o?i.a.createElement(o.Consumer,null,(function(e){return t(e)})):t(a)}},QeBL:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var r=n("nKUr"),i=n("q1tI"),a=n.n(i),o=n("Si4v"),c=n("vOnD");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=n("o0o1"),f=n.n(l),d=n("HaE+"),p=n("29yR");function b(e){var t=e.fileName.substring(e.fileName.indexOf(".")+1),n=Object(r.jsx)(p.a,{});switch(t){case"jpg":case"jpeg":case"png":case"gif":n=Object(r.jsx)(p.d,{});break;case"mp3":n=Object(r.jsx)(p.c,{});break;case"mp4":n=Object(r.jsx)(p.b,{});break;default:n=Object(r.jsx)(p.a,{})}return n}var h=n("kf6h");function v(e){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n("3FQt"),m=c.a.div.withConfig({componentId:"sc-1qwkugr-0"})([".file-set{cursor:pointer;text-align:center;margin:0.5rem;height:85px;width:70px;position:relative;&.selected{background-color:rgba(164,199,224,0.3);}}.event-filter{position:absolute;top:0;left:0;width:100%;height:100%;}.title{font-size:0.5rem;width:60px;height:30px;padding:0 5px;overflow:scroll;word-break:break-all;}svg{width:50px;}"]);function y(e){var t=Object(i.useState)(""),n=t[0],a=t[1],o=Object(g.b)(),c=Object(i.useState)(Math.random())[0],s=e.file,u=e.pressing,l=e.setSelected,p=e.isSelected,h=e.fileKeyList;Object(i.useEffect)((function(){o.setFileKeys(h)}),[o.visible]);var j=JSON.parse(s.Attributes),y=function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,v(s.FileKey);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(m,{children:Object(r.jsxs)("div",{className:"file-set "+(p(s.FileKey)?"selected":""),children:[Object(r.jsx)("div",{className:"event-filter",draggable:"true",onContextMenu:function(e){e.preventDefault(),e.stopPropagation(),p(s.FileKey)?l(!0,s.FileKey,"contextMenuWhenSelected"):l(!0,s.FileKey,"contextMenuWhenNew"),o.setVisible(!0),o.setTop(e.clientY+window.scrollY-30),o.setLeft(e.clientX+1)},onClick:function(e){e.stopPropagation(),o.setVisible(!1),l(!0,s.FileKey,"click")},onMouseDown:y,onMouseOver:function(){u&&(o.setVisible(!1),l(!0,s.FileKey,"drag"))},onDragStart:function(e){n.length<1||function(e,t,n){e.dataTransfer.setData("DownloadUrl","applicatin/octet-stream:%s:data:image/jpeg;base64,%s".replace("%s",t).replace("%s",n))}(e,j.FileName,n)}},s.FileKey),Object(r.jsx)(b,{fileName:j.FileName}),Object(r.jsx)("div",{className:"title",children:j.FileName})]},c)})}var x=c.a.div.withConfig({componentId:"sc-1ugf2cl-0"})(["background-color:rgba(0,0,0,0.5);position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;display:flex;justify-content:center;align-items:center;#progressbar{width:80%;}"]);function O(e){return e.progress<0?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)(x,{children:Object(r.jsx)("progress",{id:"progressbar",className:"uk-progress",value:e.progress,max:"100"})})}var w=n("DD0p"),k=c.a.div.withConfig({componentId:"sc-1udnpcn-0"})(["position:absolute;border:solid 1px #ddd;border-radius:3px;background:rgba(255,255,255,0.9);z-index:100;ul{font-size:0.8rem;padding:5px 0;margin:0;list-style:none;li{padding:2px 20px;cursor:pointer;&:hover{background-color:#0000ff;color:#fff;}}}"]);function S(e){var t=Object(w.b)(),n=t.files,i=t.setFiles,a=Object(g.b)(),o=function(){var e=Object(d.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setVisible(!1),e.next=3,Object(h.c)(a.fileKeys,t);case 3:r=e.sent,"delete"===t&&i(n.filter((function(e){return!r.includes(e.FileKey)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.visible?Object(r.jsx)(k,{style:{top:a.top,left:a.left},children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{onClick:function(e){return o("delete")},children:"Delete"}),Object(r.jsx)("li",{children:"Rename"})]})}):Object(r.jsx)(r.Fragment,{})}function N(){var e=Object(i.useRef)(null),t=Object(i.forwardRef)((function(e,t){return Object(r.jsx)("div",{ref:t,children:Object(r.jsx)(S,{})})}));return Object(r.jsx)(t,{ref:e})}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}var I=n("rePB");function z(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(I.a)(this,"files",void 0),Object(I.a)(this,"analyzedFiles",void 0),Object(I.a)(this,"uploadedFiles",void 0),Object(I.a)(this,"maxExecutionNumber",void 0),this.files=t,this.analyzedFiles=[],this.uploadedFiles=[],this.maxExecutionNumber=0}return E(e,null,[{key:"DIVISION_SIZE",get:function(){return 4096e3}}]),E(e,[{key:"analyze",value:function(){var t=Object(d.a)(f.a.mark((function t(){var n,r,i,a,o,c,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=z(this.files),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=15;break}return i=r.value,t.next=7,this.read(i);case 7:for(a=t.sent,o=Math.ceil(a.length/e.DIVISION_SIZE),c=[],s=0;s<o;s++)c.push(a.slice(s*e.DIVISION_SIZE,(s+1)*e.DIVISION_SIZE));this.maxExecutionNumber+=o,this.analyzedFiles.push({dataSet:c,fileKey:btoa(String(1e6*Math.random()+Date.now())),fileName:i.name,fileSize:a.length,divisionNumber:o,executionCount:0,status:"initialized",transferInitialized:function(){this.status="initialized"},transferRunning:function(){this.status="running"},transferCompleted:function(){this.status="completed"},progress:function(){return this.executionCount/this.divisionNumber*100}});case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:return t.abrupt("return",!0);case 24:case"end":return t.stop()}}),t,this,[[1,17,20,23]])})));return function(){return t.apply(this,arguments)}}()},{key:"read",value:function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(btoa(String(r.result)))},r.onerror=function(){throw r.error},r.readAsBinaryString(e)}))}},{key:"popUploadedFile",value:function(){return this.uploadedFiles.length<1?null:this.uploadedFiles.shift()}},{key:"progress",value:function(){return this.analyzedFiles.reduce((function(e,t){return e+t.executionCount}),0)/this.maxExecutionNumber*100}},{key:"running",value:function(){return 0!==this.progress()}},{key:"completed",value:function(){return 100===this.progress()}},{key:"clear",value:function(){this.analyzedFiles=[]}},{key:"getMaxExecutionNumber",value:function(){return this.maxExecutionNumber}},{key:"getAnalyzedFiles",value:function(){return this.analyzedFiles}},{key:"bulkUpload",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=z(this.analyzedFiles),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,this.upload(r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.transferRunning(),n=0;case 2:if(!(n<t.dataSet.length)){e.next=11;break}return e.next=5,Object(h.e)(t,n);case 5:r=e.sent,t.executionCount+=1,Object.keys(r).length>0&&this.uploadedFiles.push(r);case 8:n++,e.next=2;break;case 11:return t.transferCompleted(),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=n("E4zW"),M=c.a.div.withConfig({componentId:"okf5z5-0"})(["margin-top:30px;min-height:80px;padding:1rem;border:dashed 3px #ccc;"]);function _(){var e=Object(w.b)(),t=e.files,n=e.setFiles,o=Object(i.useState)(-1),c=o[0],s=o[1],l=Object(i.useState)(!1),f=l[0],d=l[1],p=Object(i.useState)({}),b=p[0],v=p[1],j=Object(i.useState)(!1),g=j[0],m=j[1],x=Object(i.useState)([]),k=x[0],S=x[1],F=a.a.useRef(null),E=function(){if(!g){var e={};t.forEach((function(t){return e[t.FileKey]=!1})),v(e),S([])}};Object(i.useEffect)((function(){Object(h.d)(n),null!=F.current&&F.current.addEventListener("selectstart",(function(e){return e.preventDefault()}))}),[]),Object(i.useEffect)((function(){E()}),[t]);var I=function(e,t,n){var r={};switch(n){case"click":case"contextMenuWhenNew":for(var i=0,a=Object.entries(b);i<a.length;i++){var o=u(a[i],1)[0];r[o]=t===o&&e}S([t]);break;case"drag":case"contextMenuWhenSelected":"drag"===n&&function(e){k.findIndex((function(t){return t===e}))>-1||S([e].concat(k))}(t);for(var c=0,s=Object.entries(b);c<s.length;c++){var l=u(s[c],2),f=l[0],d=l[1];r[f]=t===f?e:d}break;default:throw new Error("Context is not specified.")}v(r)},z=function(e){return b[e]};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(M,{ref:F,id:"files-area",className:"uk-flex uk-flex-wrap",onClick:function(){return E()},onMouseDown:function(){return d(!0),m(!1),void setTimeout((function(){return m(!0)}),300)},onMouseUp:function(){return d(!1)},onMouseLeave:function(){return d(!1)},onDragStart:function(){return d(!1)},onDrop:function(e){return function(e){e.preventDefault();var r=e.dataTransfer.files;if(!(r.length<1)){s(0);var i=new D(r);i.analyze().then((function(e){var r=setInterval((function(){i.running()&&s(i.progress());var e=i.popUploadedFile();null!==e&&(t.push(e),Object(K.a)(t),n(t)),i.completed()&&(i.clear(),setTimeout((function(){s(-1),clearInterval(r)}),500))}),50);i.bulkUpload()}))}}(e)},onDragOver:function(e){return e.preventDefault()},children:[Object(r.jsx)(O,{progress:c}),t.map((function(e,t){return void 0===e?"":Object(r.jsx)(y,{file:e,pressing:f,fileKeyList:k,setSelected:I,isSelected:z},e.FileKey)}))]}),Object(r.jsx)(N,{})]})}var A=c.a.div.withConfig({componentId:"sc-1g5bxdo-0"})([""]);function P(){return Object(r.jsx)(o.a,{children:Object(r.jsx)(A,{children:Object(r.jsx)(_,{})})})}}},[["/EDR",1,2,7,0,3,4,5]]]);